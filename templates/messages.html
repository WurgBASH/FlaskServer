<!doctype html>
<title>Server Send Events Demo</title>
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
<script src="{{ url_for('static', filename='jquery.js') }}"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.5/socket.io.min.js"></script>
<script>


        $(document).ready(function() {

            var socket = io.connect("http://127.0.0.1:5000/test");
            // Event handler for new connections.
            // The callback function is invoked when a connection with the
            // server is established.
            socket.on('connect', function() {
                socket.emit('my_event', {data: 'I\'m connected!'});
            });
            socket.on('my_response', function(msg, cb) {
                $("#data").append( "<div class=\"container\"><p>"+msg.text+"</p><span class = \".time-right\">"+msg.user+"</span></div>");
            });
            socket.on('connection', function(msg, cb) {
                console.log('con')
            });
        });

</script>
<p><a href="/">Home</a></p>

<form action="/send_message" method="post">
	<input type="text" name="msg_text">
    <button name="forwardBtn" type="submit">Send</button>
</form>
<div id="data">All messages:
</div>

